<!DOCTYPE html>
<html lang="en">
<head>
<body>

<form id="searching" onscroll="fixToTop()"
      action="javascript:void(0);">
    <input type="text"  placeholder="Search.." name="search">
    <button type="submit"><i class="fa fa-search"></i></button>
</form>
<div class="content">
</div>
<div class="selectors">
    <button type="button" onclick="selectAll()">Select All</button>
    <button type="button" onclick="deselectAll()">Deselect All</button>
</div>
<div class="save">
    <button type="button" onclick="writeJSON()">Export JSON</button>
    <button type="button" onclick="writeCSV()">Export CSV</button>
    <button type="button" onclick="writeXML()">Export XML</button>
    <br><br>
    <a style="display: none; width: fit-content;" href="" id="download" download>Download file</a>
</div>

<script src="var searchButton = document.getElementById("searching");
searchButton.addEventListener("submit", function(e) {
search(searchButton.children[0].value);});

var baseurl = "https://www.googleapis.com/customsearch/v1?key=AIzaSyB2mlCZoRqLWH1zne_FHDzXa-psYJBmcos&cx=006599904522280934839:k6k8olncbnz&q=";

function search(searchTerm) {
var res = document.getElementsByClassName("content")[0].innerHTML = "";
var url = baseurl + searchTerm;
var request = new XMLHttpRequest();
request.open('GET', url, true);
console.log("searching...");
request.onload = function () {
console.log("loaded");
var data = JSON.parse(this.response);
if (request.status == 200) {
var results = document.getElementsByClassName("content")[0];
for (var i = 0; i < data["items"].length; i++) {
var container = document.createElement("div");
container.className = "result";
var checkb = document.createElement("input");
checkb.type = "checkbox";
var link = document.createElement("a");
link.href = data["items"][i].formattedUrl;
link.innerHTML = data["items"][i].title;
var url = document.createElement("p");
url.className = "url";
url.innerHTML = data["items"][i].formattedUrl;
var desc = document.createElement("p");
desc.className = "desc";
desc.innerHTML = data["items"][i].snippet;
var br = document.createElement("br");
container.appendChild(checkb);
container.appendChild(link);
container.appendChild(url);
container.appendChild(desc);
container.appendChild(br);
results.appendChild(container);
}
}
}
request.send();
}"></script>

</body>
</html>

